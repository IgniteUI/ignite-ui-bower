/*!@license
* Infragistics.Web.ClientUI Scroll localization resources 0.16.2-PreRelease.2
*
* Copyright (c) 2011-2016 Infragistics Inc.
*
* http://www.infragistics.com/
*
*/
(function($){$.ig=$.ig||{};if(!$.ig.Scroll){$.ig.Scroll={};$.extend($.ig.Scroll,{locale:{errorNoElementLink:"Element that is being linked does not exists.",errorNoScrollbarLink:"Scrollbar element that is being linked does not exists."}})}})(jQuery);
/*!@license
* Infragistics.Web.ClientUI Scroll 0.16.2-PreRelease.2
*
* Copyright (c) 2011-2016 Infragistics Inc.
*
* http://www.infragistics.com/
*
* Depends on:
* jquery-1.9.1.js
* jquery.ui-1.9.0.js
* infragistics.util.js
*/
(function($){var setPointerCaptureFName=typeof Element.prototype.msSetPointerCapture==="function"?"msSetPointerCapture":"setPointerCapture",releasePointerCaptureFName=typeof Element.prototype.msReleasePointerCapture==="function"?"msReleasePointerCapture":"releasePointerCapture";$.widget("ui.igScroll",{options:{alwaysVisible:false,scrollbarType:"custom",modifyDOM:true,scrollHeight:null,scrollWidth:null,scrollTop:0,scrollLeft:0,wheelStep:50,smallIncrementStep:40,bigIncrementStep:null,smoothing:false,smoothingStep:1,smoothingDuration:1,inertiaStep:1,inertiaDuration:1,swipeToleranceX:30,inertiaDeltaX:1.25,inertiaDeltaY:2,syncedElemsH:[],syncedElemsV:[],scrollbarH:null,scrollbarV:null,scrollOnlyHBar:false,scrollOnlyVBar:false,scrollbarHParent:null,scrollbarVParent:null},events:{rendered:null,scrolling:null,scrolled:null,thumbDragStart:null,thumbDragMove:null,thumbDragEnd:null},css:{scrollableElem:"igscroll-scrollable",scrollContent:"igscroll-content",scrollContainer:"igscroll-container",nativeVScrollOuter:"igscroll-vnative-outer",nativeVScrollInner:"igscroll-vnative-inner",nativeHScrollOuter:"igscroll-hnative-outer",nativeHScrollInner:"igscroll-hnative-inner",verticalScrollContainer:"igscroll-vcontainer",verticalScrollTrack:"igscroll-vtrack",verticalScrollArrow:"igscroll-varrow",verticalScrollArrowUp:"igscroll-uparrow",verticalScrollArrowUpActive:"igscroll-uparrow-active",verticalScrollArrowDown:"igscroll-downarrow",verticalScrollArrowDownActive:"igscroll-downarrow-active",verticalScrollThumbDrag:"igscroll-vdrag",horizontalScrollContainer:"igscroll-hcontainer",horizontalScrollTrack:"igscroll-htrack",horizontalScrollArrow:"igscroll-harrow",horizontalScrollArrowLeft:"igscroll-leftarrow",horizontalScrollArrowLeftActive:"igscroll-leftarrow-active",horizontalScrollArrowRight:"igscroll-rightarrow",horizontalScrollArrowRightActive:"igscroll-rightarrow-active",horizontalScrollThumbDrag:"igscroll-hdrag"},refresh:function(){this._elemWidth=this.element.width();this._contentWidth=this._content.width();this._percentInViewH=this._elemWidth/this._contentWidth;this._dragMaxX=this._elemWidth;this._isScrollableH=this._percentInViewH<1;this._elemHeight=this.element.height();this._contentHeight=this._content.height();this._percentInViewV=this._elemHeight/this._contentHeight;this._dragMaxY=this._elemHeight;this._isScrollableV=this._percentInViewV<1;if(this.options.modifyDOM){this._container.css({width:this._elemWidth+"px",height:this._elemHeight+"px"})}this._refreshScrollbarsDrag();return this.element},_create:function(){var elem=this.element;this._bMixedEnvironment=false;this._linkedHElems=[];this._linkedVElems=[];this._linkedHBar=null;this._linkedVBar=null;this._elemWidth=elem.width();this._elemHeight=elem.height();this._showScrollbarsAnimId=0;this._hideScrollbarID=0;this._toSimpleScrollbarID=0;this._touchInertiaAnimID=0;this._mOverContainer=false;this._mOverScrollbars=false;this._scrollFromSyncContentH=false;this._scrollFromSyncContentV=false;this._numSmoothAnimation=0;if(this.options.modifyDOM){elem.addClass(this.css.scrollableElem);this._content=$("<div id='"+this.element.attr("id")+"_content'/>").addClass(this.css.scrollContent).appendTo(elem).append(elem.children());this._container=$("<div id='"+this.element.attr("id")+"_container'/>").addClass(this.css.scrollContainer).css({width:this._elemWidth+"px",height:this._elemHeight+"px"}).insertBefore(this._content).append(this._content);this._container.data("containerName","scrollContainer")}else{this._container=elem;this._content=$(elem.children()[0])}this._contentHeight=this._content[0].scrollHeight;this._contentWidth=this._content[0].scrollWidth;this._percentInViewH=this._elemWidth/this._contentWidth;this._percentInViewV=this._elemHeight/this._contentHeight;this._dragMaxY=this._elemHeight;this._dragMaxX=this._elemWidth;this._customBarArrowsSize=15;this._customBarEmptySpaceSize=15;this._isScrollableV=this._percentInViewV<1;this._isScrollableH=this._percentInViewH<1;this._initOptions(this.options);this._startX=0;this._startY=0;this._touchStartX=0;this._touchStartY=0;this._moving=false;this._evts={scroll:$.proxy(this._onScrollContainer,this),wheel:$.proxy(this._onWheelContainer,this),DOMMouseScroll:$.proxy(this._onWheelContainer,this),pointerdown:$.proxy(this._onPointerDownContainer,this),pointerup:$.proxy(this._onPointerUpContainer,this),MSPointerDown:$.proxy(this._onPointerDownContainer,this),MSGestureStart:$.proxy(this._onMSGestureStartContainer,this),MSGestureChange:$.proxy(this._onMSGestureChangeContainer,this),MSGestureEnd:$.proxy(this._onMSGestureEndContainer,this),touchstart:$.proxy(this._onTouchStartContainer,this),touchmove:$.proxy(this._onTouchMoveContainer,this),touchend:$.proxy(this._onTouchEndContainer,this),mouseenter:$.proxy(this._onMouseEnterContainer,this),mouseleave:$.proxy(this._onMouseLeaveContainer,this)};this._container.on(this._evts);this._createScrollBars();this._hideScrollBars(false);if(this.options.alwaysVisible){if($.ig.util.isTouch){this._showScrollBars(false,true,false)}else{this._showScrollBars(false,false,false)}}else{this._showScrollBars(true,true,true,.02)}this._trigger("rendered",null,{owner:this})},_initOptions:function(scrollOptions){if(scrollOptions){if(typeof scrollOptions.syncedElemsH[0]!=="undefined"){this._linkElementsH(scrollOptions.syncedElemsH)}if(typeof scrollOptions.syncedElemsV[0]!=="undefined"){this._linkElementsV(scrollOptions.syncedElemsV)}if(scrollOptions.scrollbarH!==null){this._bindHScrollbar(scrollOptions.scrollbarH)}if(scrollOptions.scrollbarV!==null){this._bindVScrollbar(scrollOptions.scrollbarV)}if(scrollOptions.scrollHeight!==null){this._setScrollHeight(scrollOptions.scrollHeight)}if(scrollOptions.scrollWidth!==null){this._setScrollWidth(scrollOptions.scrollWidth)}if(scrollOptions.scrollTop!==0){this._scrollTop(scrollOptions.scrollTop,false)}if(scrollOptions.scrollLeft!==0){this._scrollLeft(scrollOptions.scrollLeft,false)}}},_setOption:function(key,value){this._super(key,value);if(key==="alwaysVisible"){if(value===true){if($.ig.util.isTouch){this._showScrollBars(false,true,false)}else{this._showScrollBars(false,false,false)}}}if(key==="scrollbarType"){this._removeScrollbars();if(value!=="none"){this._createScrollBars();this._scrollToXY(0,0,true)}}if(key==="scrollTop"){this._scrollTop(value,true)}if(key==="scrollLeft"){this._scrollLeft(value,true)}if(key==="scrollHeight"){this._setScrollHeight(value);this._removeScrollbars();this._createScrollBars();this._updateScrollBarsPos(this._getContentPositionX(),this._getContentPositionY())}if(key==="scrollWidth"){this._setScrollWidth(value);this._removeScrollbars();this._createScrollBars();this._updateScrollBarsPos(this._getContentPositionX(),this._getContentPositionY())}if(key==="syncedElemsH"){this._linkElementsH(value)}if(key==="syncedElemsV"){this._linkElementsV(value)}if(key==="scrollbarH"){this._bindHScrollbar(value)}if(key==="scrollbarV"){this._bindVScrollbar(value)}},option:function(optionName,value){if(optionName==="scrollTop"&&value===undefined){return this._scrollTop(null,true)}if(optionName==="scrollLeft"&&value===undefined){return this._scrollLeft(null,true)}return this._super(optionName,value)},_getContentPositionX:function(){if($.ig.util.isTouch&&!this._bMixedEnvironment){var posX=-this._getTransform3dValueX(this._content);return posX}else{return this._container.scrollLeft()}},_getContentPositionY:function(){if($.ig.util.isTouch&&!this._bMixedEnvironment){var posY=-this._getTransform3dValueY(this._content);return posY}else{return this._container.scrollTop()}},_getTransform3dValueX:function(jqElem){var matrix,values,posX;if(jqElem.css("-webkit-transform")){matrix=jqElem.css("-webkit-transform");values=matrix?matrix.match(/-?[\d\.]+/g):undefined;posX=values?Number(values[4]):0}else if(jqElem.css("-moz-transform")){matrix=jqElem.css("-moz-transform");values=matrix?matrix.match(/-?[\d\.]+/g):undefined;posX=values?Number(values[4]):0}else if(jqElem.css("-ms-transform")){matrix=jqElem.css("-ms-transform");values=matrix?matrix.match(/-?[\d\.]+/g):undefined;posX=values?Number(values[13]):0}return posX},_getTransform3dValueY:function(jqElem){var matrix,values,posY;if(jqElem.css("-webkit-transform")){matrix=jqElem.css("-webkit-transform");values=matrix?matrix.match(/-?[\d\.]+/g):undefined;posY=values?Number(values[5]):0}else if(jqElem.css("-moz-transform")){matrix=jqElem.css("-moz-transform");values=matrix?matrix.match(/-?[\d\.]+/g):undefined;posY=values?Number(values[5]):0}else if(jqElem.css("-ms-transform")){matrix=jqElem.css("-ms-transform");values=matrix?matrix.match(/-?[\d\.]+/g):undefined;posY=values?Number(values[14]):0}return posY},_getScrollbarVPosition:function(){if(this._linkedVBar){return this._linkedVBar.scrollTop()}else{return this._getContentPositionY()}},_getScrollbarHPosition:function(){if(this._linkedHBar){return this._linkedHBar.scrollLeft()}else{return this._getContentPositionX()}},_scrollLeft:function(val,triggerEvents){if(val==="undefined"||val===null){return this._getContentPositionX()}if($.ig.util.isTouch&&!this._bMixedEnvironment){var posY=this._getContentPositionY();this._scrollTouchToXY(val,posY,triggerEvents)}else{this._scrollToX(val,triggerEvents)}if(triggerEvents){var self=this;this._trigger("scrolled",null,{owner:self,smallIncrement:0,bigIncrement:0,horizontal:true})}return this},_scrollTop:function(val,triggerEvents){if(val==="undefined"||val===null){return this._getContentPositionY()}if($.ig.util.isTouch&&!this._bMixedEnvironment){var posX=this._getContentPositionX();this._scrollTouchToXY(posX,val,triggerEvents)}else{this._scrollToY(val,triggerEvents)}if(triggerEvents){var self=this;this._trigger("scrolled",null,{owner:self,smallIncrement:0,bigIncrement:0,horizontal:false})}return this},_setScrollWidth:function(inWidth){this._elemWidth=this._container.width();this._contentWidth=inWidth;this._percentInViewH=this._elemWidth/this._contentWidth;this._isScrollableH=this._percentInViewH<1;if(this.options.modifyDOM){this._content.css("width",inWidth+"px")}return this.element},_setScrollHeight:function(inHeight){this._elemHeight=this._container.innerHeight();this._contentHeight=inHeight;this._percentInViewV=this._elemHeight/this._contentHeight;this._isScrollableV=this._percentInViewV<1;if(this.options.modifyDOM){this._content.css("height",inHeight+"px")}return this.element},_refreshScrollbarsDrag:function(){if(this.options.scrollbarType==="custom"&&this._vBarTrack&&this._vBarDrag){this._vDragHeight=(this._elemHeight-(2*this._customBarArrowsSize+this._customBarEmptySpaceSize))*this._percentInViewV;this._vBarContainer.css("height",this._elemHeight-this._customBarEmptySpaceSize+"px");this._vBarDrag.css("height",this._vDragHeight+"px");this._vBarTrack.css("height",this._elemHeight-(2*this._customBarArrowsSize+this._customBarEmptySpaceSize)+"px")}else if(this.options.scrollbarType==="native"&&this._vBarContainer){this._vBarContainer.css("height",this._elemHeight-this._customBarEmptySpaceSize+"px")}if(this.options.scrollbarType==="custom"&&this._hBarTrack&&this._hBarDrag){this._hDragWidth=(this._elemWidth-(2*this._customBarArrowsSize+this._customBarEmptySpaceSize))*this._percentInViewH;this._hBarContainer.css("width",this._elemWidth-this._customBarEmptySpaceSize+"px");this._hBarDrag.css("width",this._hDragWidth+"px");this._hBarTrack.css("width",this._elemWidth-(2*this._customBarArrowsSize+this._customBarEmptySpaceSize)+"px")}else if(this.options.scrollbarType==="native"&&this._hBarContainer){this._hBarContainer.css("width",this._elemWidth-this._customBarEmptySpaceSize+"px")}},_linkElementsH:function(inElements){this._linkedHElems=[];if(inElements){for(var index in inElements){var elemObject=$(inElements[index]);if(elemObject.length){this._linkedHElems.push(elemObject)}else{throw new Error($.ig.Scroll.locale.errorNoElementLink)}}}return this._linkedHElems},_linkElementsV:function(inElements){this._linkedVElems=[];if(inElements){for(var index in inElements){var elemObject=$(inElements[index]);if(elemObject.length){this._linkedVElems.push(elemObject)}else{throw new Error($.ig.Scroll.locale.errorNoElementLink)}}}return this._linkedVElems},_bindHScrollbar:function(inElement){var self=this;if(inElement){var elemObject=$(inElement);if(elemObject.length){elemObject.on({scroll:function(e){var ignoreSync=self._ignoreHScrollBarEvents;self._ignoreHScrollBarEvents=false;if(ignoreSync||self.options.scrollOnlyHBar){return false}else{if(!self._bMixedEnvironment){self._bMixedEnvironment=true;self._switchFromTouchToMixed()}self._syncContentX(e.target,false);self._syncElemsX(e.target,false)}}});if(this._linkedHBar&&this._linkedHBar[0]!==elemObject[0]){this._linkedHBar.off()}this._linkedHBar=elemObject}else{throw new Error($.ig.Scroll.locale.errorNoScrollbarLink)}}return this._linkedHBar},_bindVScrollbar:function(inElement){var self=this;if(inElement){var elemObject=$(inElement);if(elemObject.length){elemObject.on({scroll:function(e){var ignoreSync=self._ignoreVScrollBarEvents;self._ignoreVScrollBarEvents=false;if(ignoreSync||self.options.scrollOnlyVBar){return false}else{if(!self._bMixedEnvironment){self._bMixedEnvironment=true;self._switchFromTouchToMixed()}self._syncContentY(e.target,false);self._syncElemsY(e.target,false)}}});if(this._linkedVBar&&this._linkedVBar[0]!==elemObject[0]){this._linkedVBar.off()}this._linkedVBar=elemObject}else{throw new Error($.ig.Scroll.locale.errorNoScrollbarLink)}}return this._linkedVBar},_clampAxisCoords:function(target,min,max){if(target===undefined||target<min){target=min}else if(target>max){target=max}return target},_scrollToXY:function(destX,destY,triggerEvents){var curPosX=this._getContentPositionX(),curPosY=this._getContentPositionY();destX=this._clampAxisCoords(destX,0,Math.max(this._contentWidth-this._dragMaxX,0));destY=this._clampAxisCoords(destY,0,Math.max(this._contentHeight-this._dragMaxY,0));if(triggerEvents){var bNoCancel=this._trigger("scrolling",null,{owner:this,smallIncrement:0,bigIncrement:0,horizontal:null,stepX:destX-curPosX,stepY:destY-curPosY});if(!bNoCancel){return{x:0,y:0}}}var scrolledX,scrolledY;scrolledX=this._scrollToX(destX,false);scrolledY=this._scrollToY(destY,false);return{x:scrolledX,y:scrolledY}},_scrollToX:function(destX,triggerEvents){if(!this._isScrollableH&&!this.options.scrollOnlyHBar){return}var curPosX;if(this.options.scrollOnlyHBar){curPosX=this._getScrollbarHPosition()}else{curPosX=this._getContentPositionX()}destX=this._clampAxisCoords(destX,0,this._contentWidth-this._dragMaxX);if(triggerEvents){var bNoCancel=this._trigger("scrolling",null,{owner:this,smallIncrement:0,bigIncrement:0,horizontal:true,stepX:destX-curPosX,stepY:0});if(!bNoCancel){return 0}}if(this.options.scrollOnlyHBar){this._moveHBarX(destX)}else{this._container.scrollLeft(destX);this._syncElemsX(this._container[0],false);var curY=this._getContentPositionY();this._updateScrollBarsPos(destX,curY,true)}return destX-curPosX},_scrollToY:function(destY,triggerEvents){if(!this._isScrollableV&&!this.options.scrollOnlyVBar){return}var curPosY;if(this.options.scrollOnlyVBar){curPosY=this._getScrollbarVPosition()}else{curPosY=this._getContentPositionY()}destY=this._clampAxisCoords(destY,0,this._contentHeight-this._dragMaxY);if(triggerEvents){var bNoCancel=this._trigger("scrolling",null,{owner:this,smallIncrement:0,bigIncrement:0,horizontal:false,stepX:0,stepY:destY-curPosY});if(!bNoCancel){return 0}}if(this.options.scrollOnlyVBar){this._moveVBarY(destY)}else{this._container.scrollTop(destY);this._syncElemsY(this._container[0],false);var curX=this._getContentPositionX();this._updateScrollBarsPos(curX,destY,true)}return destY-curPosY},_smoothWheelScrollY:function(deltaY){var self=this,smoothingStep=this.options.smoothingStep,smoothingDuration=this.options.smoothingDuration,animationId;var x=-1;if(this.options.scrollOnlyVBar){self._nextY=this._getScrollbarVPosition()}else{self._nextY=this._getContentPositionY()}function inertiaStep(){if(x>1){cancelAnimationFrame(animationId);self._numSmoothAnimation-=1;if(!self._numSmoothAnimation){self._trigger("scrolled",null,{owner:self,smallIncrement:0,bigIncrement:0,horizontal:false})}return}self._nextY+=(-3*x*x+3)*(deltaY>0?1:-1)*2*smoothingStep;self._scrollToY(self._nextY,true);x+=.08*(1/smoothingDuration);animationId=requestAnimationFrame(inertiaStep)}self._numSmoothAnimation+=1;animationId=requestAnimationFrame(inertiaStep)},_switchFromTouchToMixed:function(){var startX=this._getTransform3dValueX(this._content),startY=this._getTransform3dValueY(this._content);if(startX!==0||startY!==0){this._scrollTouchToXY(0,0,false);this._scrollToXY(-startX,-startY,false)}},_scrollTouchToXY:function(destX,destY,triggerEvents){var bNoCancel,self=this,curPosX=this._getContentPositionX(),curPosY=this._getContentPositionY();destX=this._clampAxisCoords(destX,0,Math.max(this._contentWidth-this._dragMaxX,0));destY=this._clampAxisCoords(destY,0,Math.max(this._contentHeight-this._dragMaxY,0));if(triggerEvents){bNoCancel=this._trigger("scrolling",null,{owner:self,smallIncrement:0,bigIncrement:0,horizontal:null,stepX:destX-curPosX,stepY:destY-curPosY});if(!bNoCancel){return{x:0,y:0}}}if(this.options.scrollOnlyVBar){self._scrollToY(destY,false);if(this.options.scrollOnlyHBar){self._scrollToX(destX)}else{this._content.css({"-webkit-transform":"translate3d("+-destX+"px, 0px, 0px)"});self._syncElemsX(this._content,true,-destX,true)}destY=this._getScrollbarVPosition();self._updateScrollBarsPos(destX,destY);return{x:destX-curPosX,y:destY-curPosY}}var distanceLeftX=-destX;var distanceTopY=-destY;if(!this.options.scrollOnlyVBar&&!this.options.scrollOnlyHBar){this._content.css({"-webkit-transform":"translate3d("+distanceLeftX+"px,"+distanceTopY+"px, 0px)"})}self._syncElemsX(this._content,true);self._syncElemsY(this._content,true);self._updateScrollBarsPos(destX,destY);self._syncHBar(this._content,true);self._syncVBar(this._content,true);return{x:destX-curPosX,y:destY-curPosY}},_inertiaInit:function(speedX,speedY,bDefaultScroll){var self=this,x=0,stepModifer=this.options.inertiaStep,inertiaDuration=this.options.inertiaDuration;if(this.options.scrollOnlyVBar){self._nextY=self._getScrollbarVPosition()}else{self._nextY=self._getContentPositionY()}if(this.options.scrollOnlyHBar){self._nextX=self._getScrollbarHPosition()}else{self._nextX=self._getContentPositionX()}function inertiaStep(){if(x>6){self._hideScrollBars(true,true);cancelAnimationFrame(self._touchInertiaAnimID);self._trigger("scrolled",null,{owner:self,smallIncrement:0,bigIncrement:0,horizontal:null});return}if(Math.abs(speedX)>Math.abs(speedY)){x+=.05/(1*inertiaDuration)}else{x+=.05/(1*inertiaDuration)}if(x<=1){if(Math.abs(speedY)<=Math.abs(speedX)*self.options.inertiaDeltaY){self._nextX+=1*speedX*15*stepModifer}if(Math.abs(speedY)>=Math.abs(speedX)*self.options.inertiaDeltaX){self._nextY+=1*speedY*15*stepModifer}}else{if(Math.abs(speedY)<=Math.abs(speedX)*self.options.inertiaDeltaY){self._nextX+=Math.abs(2/(x+.55)-.3)*speedX*15*stepModifer}if(Math.abs(speedY)>=Math.abs(speedX)*self.options.inertiaDeltaX){self._nextY+=Math.abs(2/(x+.55)-.3)*speedY*15*stepModifer}}if(bDefaultScroll){self._scrollToXY(self._nextX,self._nextY,true)}else{self._scrollTouchToXY(self._nextX,self._nextY,true)}self._touchInertiaAnimID=requestAnimationFrame(inertiaStep)}this._touchInertiaAnimID=requestAnimationFrame(inertiaStep)},_getSpeedSlope:function(inLastFiveSpeeds){if(inLastFiveSpeeds.length===0){return 1}if(inLastFiveSpeeds.length<5){return-1}var numPoints=inLastFiveSpeeds.length,sumXY=0,sumX=0,sumY=0,sumXX=0;for(var pointIndex=0;pointIndex<numPoints;pointIndex++){var pointX=pointIndex,pointY=Math.abs(inLastFiveSpeeds[pointIndex]);sumXY+=pointX*pointY;sumX+=pointX;sumY+=pointY;sumXX+=pointX*pointX}var slopeAngle=(numPoints*sumXY-sumX*sumY)/(numPoints*sumXX-sumX*sumX);return slopeAngle},_syncContentX:function(baseElem){var self=this,destX;destX=baseElem.scrollLeft;self._scrollFromSyncContentH=true;this._container.scrollLeft(destX)},_syncContentY:function(baseElem){var self=this,destY;destY=baseElem.scrollTop;self._scrollFromSyncContentV=true;this._container.scrollTop(destY)},_syncElemsX:function(baseElem,useTransform,inDestX,useDestination){var destX,index;if(!baseElem&&!useDestination){return}if(useTransform){if(!useDestination){var matrix=this._content.css("-webkit-transform");var values=matrix?matrix.match(/-?[\d\.]+/g):undefined;destX=values?Number(values[4]):-this._getContentPositionX()}else{destX=inDestX}if(this._linkedHElems.length>0){for(index in this._linkedHElems){this._linkedHElems[index].children().eq(0).css({"-webkit-transform":"translate3d("+destX+"px,0px, 0px)"})}}}else{destX=baseElem.scrollLeft;if(this._linkedHElems.length>0){for(index in this._linkedHElems){if(this._linkedHElems[index].length){if(this._linkedHElems[index].data("igScroll")&&this._linkedHElems[index].data("igScroll").options.modifyDOM){this._linkedHElems[index].children().eq(0).scrollLeft(destX)}else{this._linkedHElems[index].scrollLeft(destX)}}}}}},_syncElemsY:function(baseElem,useTransform,inDestY,useDestination){var destY,index;if(!baseElem&&!useDestination){return}if(useTransform){if(!useDestination){var matrix=this._content.css("-webkit-transform");var values=matrix?matrix.match(/-?[\d\.]+/g):undefined;destY=values?Number(values[5]):-this._getContentPositionY()}else{destY=inDestY}if(this._linkedVElems.length>0){for(index in this._linkedVElems){var matrixElem=this._linkedVElems[index].css("-webkit-transform");var valuesElem=matrixElem?matrixElem.match(/-?[\d\.]+/g):undefined;var destX=valuesElem?Number(valuesElem[4]):-this._getContentPositionX();this._linkedVElems[index].children().eq(0).css({"-webkit-transform":"translate3d("+destX+"px,"+destY+"px, 0px)"})}}}else{destY=baseElem.scrollTop;if(this._linkedVElems.length>0){for(index in this._linkedVElems){if(this._linkedVElems[index].length){if(this._linkedVElems[index].data("igScroll")&&this._linkedVElems[index].data("igScroll").options.modifyDOM){this._linkedVElems[index].children().eq(0).scrollTop(destY)}else{this._linkedVElems[index].scrollTop(destY)}}}}}},_syncHBar:function(baseElem,useTransform){var destX;if(useTransform){destX=this._getContentPositionX()}else{destX=baseElem.scrollLeft}if(this._linkedHBar){this._ignoreHScrollBarEvents=true;this._linkedHBar.scrollLeft(destX)}},_syncVBar:function(baseElem,useTransform){var destY;if(useTransform){destY=this._getContentPositionY()}else{destY=baseElem.scrollTop}if(this._linkedVBar){this._ignoreVScrollBarEvents=true;this._linkedVBar.scrollTop(destY)}},_moveHBarX:function(destX){if(this._linkedHBar){this._linkedHBar.scrollLeft(destX)}},_moveVBarY:function(destY){if(this._linkedVBar){this._linkedVBar.scrollTop(destY)}},_onScrollContainer:function(){if(!this._bMixedEnvironment){this._bMixedEnvironment=true;this._switchFromTouchToMixed()}if(!this._scrollFromSyncContentV){this._syncElemsY(this._container[0],false);if(!this.options.scrollOnlyVBar){this._syncVBar(this._container[0],false)}}else{this._scrollFromSyncContentV=false}if(!this._scrollFromSyncContentH){this._syncElemsX(this._container[0],false);if(!this.options.scrollOnlyHBar){this._syncHBar(this._container[0],false)}}else{this._scrollFromSyncContentH=false}this._updateScrollBarsPos(this._container.scrollLeft(),this._container.scrollTop());return false},_onWheelContainer:function(event){var evt=event.originalEvent;cancelAnimationFrame(this._touchInertiaAnimID);if(!this._bMixedEnvironment){this._bMixedEnvironment=true;this._switchFromTouchToMixed()}if(this.options.smoothing){this._smoothWheelScrollY(evt.deltaY)}else{if(this.options.scrollOnlyVBar){this._startY=this._getScrollbarVPosition()}else{this._startY=this._getContentPositionY()}var scrollStep=this.options.wheelStep;var scrolledY=this._scrollToY(this._startY+(evt.deltaY>0?1:-1)*scrollStep,true);this._trigger("scrolled",null,{owner:this,smallIncrement:0,bigIncrement:0,horizontal:false});return!scrolledY}return false},_onPointerDownContainer:function(event){var evt=event.originalEvent;if(!evt||evt.pointerType!==2&&evt.pointerType!=="touch"){return true}event.target[setPointerCaptureFName](this._pointer=evt.pointerId);if(!this._gestureObject){this._gestureObject=new MSGesture;this._gestureObject.target=this._container[0]}this._gestureObject.addPointer(this._pointer)},_onPointerUpContainer:function(event){if(!this._pointer){return true}event.target[releasePointerCaptureFName](this._pointer);delete this._pointer},_onMSGestureStartContainer:function(event){if(this.options.scrollOnlyVBar){this._startX=this._getScrollbarHPosition();this._startY=this._getScrollbarVPosition()}else{this._startX=this._getContentPositionX();this._startY=this._getContentPositionY()}this._touchStartX=event.originalEvent.screenX;this._touchStartY=event.originalEvent.screenY;this._moving=true},_onMSGestureChangeContainer:function(event){var touchPos=event.originalEvent,destX=this._startX+this._touchStartX-touchPos.screenX,destY=this._startY+this._touchStartY-touchPos.screenY;this._scrollToXY(destX,destY,true);this._moving=true},_onMSGestureEndContainer:function(){this._moving=false},_onTouchStartContainer:function(event){cancelAnimationFrame(this._touchInertiaAnimID);var touch=event.originalEvent.touches[0];if(this.options.scrollOnlyHBar){this._startX=this._getScrollbarHPosition()}else{this._startX=this._getContentPositionX()}if(this.options.scrollOnlyVBar){this._startY=this._getScrollbarVPosition()}else{this._startY=this._getContentPositionY()}this._touchStartX=touch.pageX;this._touchStartY=touch.pageY;this._speedDecreasing=false;this._lastTouchEnd=(new Date).getTime();this._lastTouchX=touch.pageX;this._lastTouchY=touch.pageY;this._savedSpeedsX=[];this._savedSpeedsY=[];this._totalMovedX=0;this._offsetRecorded=false;this._offsetDirection=0;this._showScrollBars(false,true)},_onTouchMoveContainer:function(event){var touch=event.originalEvent.touches[0];var destX=this._startX+(this._touchStartX-touch.pageX)*Math.sign(this.options.inertiaStep);var destY=this._startY+(this._touchStartY-touch.pageY)*Math.sign(this.options.inertiaStep);var speedSlopeX=this._getSpeedSlope(this._savedSpeedsX);var speedSlopeY=this._getSpeedSlope(this._savedSpeedsY);if(speedSlopeY>-.1||speedSlopeX>-.1){this._speedDecreasing=true}else{this._speedDecreasing=false}var timeFromLastTouch=(new Date).getTime()-this._lastTouchEnd;if(timeFromLastTouch!==0&&timeFromLastTouch<100){var speedX=(this._lastTouchX-touch.pageX)/timeFromLastTouch;var speedY=(this._lastTouchY-touch.pageY)/timeFromLastTouch;if(this._savedSpeedsX.length<5){this._savedSpeedsX.push(speedX)}else{this._savedSpeedsX.shift();this._savedSpeedsX.push(speedX)}if(this._savedSpeedsY.length<5){this._savedSpeedsY.push(speedY)}else{this._savedSpeedsY.shift();this._savedSpeedsY.push(speedY)}}this._lastTouchEnd=(new Date).getTime();this._lastMovedX=this._lastTouchX-touch.pageX;this._lastMovedY=this._lastTouchY-touch.pageY;this._lastTouchX=touch.pageX;this._lastTouchY=touch.pageY;this._totalMovedX+=this._lastMovedX;var scrolledXY;if(Math.abs(this._totalMovedX)<this.options.swipeToleranceX&&!this._offsetRecorded){if(navigator.userAgent.indexOf("Firefox")>-1||this._bMixedEnvironment){scrolledXY=this._scrollToXY(this._startX,destY,true)}else{scrolledXY=this._scrollTouchToXY(this._startX,destY,true)}}else{if(!this._offsetRecorded){this._offsetDirection=Math.sign(destX-this._startX);this._offsetRecorded=true}if(navigator.userAgent.indexOf("Firefox")>-1||this._bMixedEnvironment){scrolledXY=this._scrollToXY(destX-this._offsetDirection*this.options.swipeToleranceX,destY,true)}else{scrolledXY=this._scrollTouchToXY(destX-this._offsetDirection*this.options.swipeToleranceX,destY,true)}}return scrolledXY.x===0&&scrolledXY.y===0},_onTouchEndContainer:function(){var speedX=0;var speedY=0;for(var i=0;i<this._savedSpeedsX.length;i++){speedX+=this._savedSpeedsX[i];speedY+=this._savedSpeedsY[i]}speedX=this._savedSpeedsX.length?speedX/this._savedSpeedsX.length:0;speedY=this._savedSpeedsX.length?speedY/this._savedSpeedsY.length:0;if((Math.abs(speedX)>.1||Math.abs(speedY)>.1)&&(Math.abs(this._lastMovedX)>2||Math.abs(this._lastMovedY)>2)){this._showScrollBars(false,true);this._inertiaInit(speedX,speedY,this._bMixedEnvironment)}else{this._hideScrollBars(true,true);this._trigger("scrolled",null,{owner:this,smallIncrement:0,bigIncrement:0,horizontal:null})}},_onMouseEnterContainer:function(){this._mOverContainer=true;cancelAnimationFrame(this._showScrollbarsAnimId);clearTimeout(this._hideScrollbarID);if(!this._toSimpleScrollbarID&&!this._bMouseDownH&&!this._bMouseDownV){this._showScrollBars(false,true)}},_onMouseLeaveContainer:function(){var self=this;this._mOverContainer=false;if(!this._bMouseDownV&&!this._bMouseDownH){this._hideScrollbarID=setTimeout(function(){self._hideScrollBars(false)},2e3)}},_createScrollBars:function(){if(this.options.scrollbarType==="none"){return}if(this.options.scrollbarType==="native"){this._initNativeScrollbars()}else if(this.options.scrollbarType==="custom"){if(this._isScrollableV){this._initCustomScrollBarV()}if(this._isScrollableH){this._initCustomScrollBarH()}if($.ig.util.isTouch){this._toSimpleScrollbar()}}},_initNativeScrollbars:function(){var css=this.css,bNativeDesktop=false;if(this._isScrollableV){this._vBarContainer=$("<div id='"+this.element.attr("id")+"_vBar'></div>").addClass(css.nativeVScrollOuter).css("height",this._elemHeight-this._customBarEmptySpaceSize+"px");this._vDragHeight=this._contentHeight;this._vBarDrag=$("<div id='"+this.element.attr("id")+"_vBar_inner'></div>").addClass(css.nativeVScrollInner).css("height",this._vDragHeight+"px");if(this.options.scrollbarVParent){this._vBarContainer.append(this._vBarDrag).appendTo(this.options.scrollbarVParent)}else{this._vBarContainer.append(this._vBarDrag).appendTo(this._container[0].parentElement)}if($.ig.util.getScrollHeight()>0){this._content.css("padding-bottom",$.ig.util.getScrollHeight()+"px");bNativeDesktop=true}this._setOption("scrollbarV",this._vBarContainer)}if(this._isScrollableH){this._hBarContainer=$("<div id='"+this.element.attr("id")+"_hBar'></div>").addClass(css.nativeHScrollOuter).css("width",this._elemWidth-this._customBarEmptySpaceSize+"px");this._hDragWidth=this._contentWidth;this._hBarDrag=$("<div id='"+this.element.attr("id")+"_hBar_inner'></div>").addClass(css.nativeHScrollInner).css("width",this._hDragWidth+"px");if(this.options.scrollbarVParent){this._hBarContainer.append(this._hBarDrag).appendTo(this.options.scrollbarVParent)}else{this._hBarContainer.append(this._hBarDrag).appendTo(this._container[0].parentElement)}if($.ig.util.getScrollWidth()>0){bNativeDesktop=true;this._content.css("padding-right",$.ig.util.getScrollWidth()+"px")}this._setOption("scrollbarH",this._hBarContainer)}if(bNativeDesktop){this._desktopFiller=$("<div id='"+this.element.attr("id")+"_scrollbarFiller'></div>").addClass("igscroll-filler");this._desktopFiller.appendTo(this._container[0].parentElement)}},_removeScrollbars:function(){if(this._vBarContainer){this._vBarContainer.remove()}if(this._hBarContainer){this._hBarContainer.remove()}if(this._desktopFiller){this._desktopFiller.remove();this._content.css("padding-right","0px").css("padding-bottom","0px")}},_initCustomScrollBarV:function(){var css=this.css;this._vBarContainer=$("<div id='"+this.element.attr("id")+"_vBar'></div>").addClass(css.verticalScrollContainer).css("height",this._elemHeight-this._customBarEmptySpaceSize+"px");this._vBarArrowUp=$("<div id='"+this.element.attr("id")+"_vBar_arrowUp'></div>").addClass(css.verticalScrollArrow).addClass(css.verticalScrollArrowUp);this._vBarTrack=$("<div id='"+this.element.attr("id")+"_vBar_track'></div>").addClass(css.verticalScrollTrack).css("height",this._elemHeight-(2*this._customBarArrowsSize+this._customBarEmptySpaceSize)+"px");this._vBarArrowDown=$("<div id='"+this.element.attr("id")+"_vBar_arrowDown'></div>").addClass(css.verticalScrollArrow).addClass(css.verticalScrollArrowDown);this._vDragHeight=(this._elemHeight-(2*this._customBarArrowsSize+this._customBarEmptySpaceSize))*this._percentInViewV;this._vBarDrag=$("<span id='"+this.element.attr("id")+"_vBar_drag'></span>").addClass(css.verticalScrollThumbDrag).css("height",this._vDragHeight+"px");
if(this.options.scrollbarVParent){this._vBarContainer.append(this._vBarArrowUp).append(this._vBarTrack.append(this._vBarDrag)).append(this._vBarArrowDown).appendTo(this.options.scrollbarVParent)}else{this._vBarContainer.append(this._vBarArrowUp).append(this._vBarTrack.append(this._vBarDrag)).append(this._vBarArrowDown).appendTo(this._container[0].parentElement)}this._bindCustomScrollBarV()},_bindCustomScrollBarV:function(){this._holdTimeoutID=0;this._bMouseDownV=false;this._bUseArrowUp=false;this._bUseArrowDown=false;this._dragLastY=0;this._bUseVDrag=false;this._bUseVTrack=false;this._lastBigIncDirV=0;this._mTrackLastPosV=0;if(this._vBarArrowUp){this._vBarArrowUp.on({mousedown:$.proxy(this._onMouseDownArrowUp,this),mouseup:$.proxy(this._onMouseUpArrowUp,this),mouseover:$.proxy(this._onMouseOverArrowUp,this),mouseout:$.proxy(this._onMouseOutScrollbarArrow,this),touchstart:$.proxy(this._onTouchStartScrollbarElem,this)})}if(this._vBarArrowDown){this._vBarArrowDown.on({mousedown:$.proxy(this._onMouseDownArrowDown,this),mouseup:$.proxy(this._onMouseUpArrowDown,this),mouseover:$.proxy(this._onMouseOverArrowDown,this),mouseout:$.proxy(this._onMouseOutScrollbarArrow,this),touchstart:$.proxy(this._onTouchStartScrollbarElem,this)})}if(this._vBarDrag){this._vBarDrag.on({mousedown:$.proxy(this._onMouseDownVDrag,this),touchstart:$.proxy(this._onTouchStartScrollbarElem,this)})}if(this._vBarTrack){this._vBarTrack.on({mousedown:$.proxy(this._onMouseDownVTrack,this),mousemove:$.proxy(this._onMouseMoveVTrack,this),mouseup:$.proxy(this._onMouseUpVTrack,this),mouseout:$.proxy(this._onMouseOutVTrack,this),touchstart:$.proxy(this._onTouchStartScrollbarElem,this)})}if(this._vBarContainer){this._vBarContainer.on({wheel:$.proxy(this._onWheelContainer,this),mouseenter:$.proxy(this._onMouseEnterScrollbarElem,this),mouseleave:$.proxy(this._onMouseLeaveScrollbarElem,this)})}$("body").on("mousemove",$.proxy(this._onMouseMoveVDrag,this));$(window).on("mouseup",$.proxy(this._onMouseUpVScrollbar,this))},_scrollTimeoutY:function(step,bSmallIncement){var curPosY=this._getContentPositionY();if(curPosY===0&&step<=0||curPosY===this._contentHeight-this._dragMaxY&&step>=0){return}var bNoCancel,eventArgs={owner:this,smallIncrement:0,bigIncrement:0,horizontal:false,stepX:0,stepY:step};if(bSmallIncement){eventArgs.smallIncrement=Math.sign(step)}else{var dragStartY=this._getTransform3dValueY(this._vBarDrag);if(this._mTrackLastPosV>dragStartY&&this._mTrackLastPosV<dragStartY+this._vDragHeight){return}eventArgs.bigIncrement=Math.sign(step);this._lastBigIncDirV=Math.sign(step)}bNoCancel=this._trigger("scrolling",null,eventArgs);if(bNoCancel){this._scrollTop(curPosY+step,false);var self=this;this._holdTimeoutID=setTimeout(function(){self._scrollTimeoutY(step,bSmallIncement)},50)}},_onMouseDownArrowUp:function(){var scrollStep=-this.options.smallIncrementStep,curPosY=this._getContentPositionY();if(curPosY===0){scrollStep=0}var bNoCancel=this._trigger("scrolling",null,{owner:this,smallIncrement:-1,bigIncrement:0,horizontal:false,stepX:0,stepY:scrollStep});if(bNoCancel){this._bMouseDownV=true;this._bUseArrowUp=true;this._vBarArrowUp.switchClass(this.css.verticalScrollArrowUp,this.css.verticalScrollArrowUpActive);this._scrollTop(curPosY+scrollStep,false);var self=this;this._holdTimeoutID=setTimeout(function(){self._scrollTimeoutY(scrollStep,true)},250)}},_onMouseUpArrowUp:function(){this._bMouseDownV=false;this._bUseArrowUp=true;this._vBarArrowUp.switchClass(this.css.verticalScrollArrowUpActive,this.css.verticalScrollArrowUp);clearTimeout(this._holdTimeoutID)},_onMouseOverArrowUp:function(){if(this._bMouseDownV&&this._bUseArrowUp){this._scrollTimeoutY(-40,true)}},_onMouseOutScrollbarArrow:function(){clearTimeout(this._holdTimeoutID)},_onMouseDownArrowDown:function(){var scrollStep=this.options.smallIncrementStep,curPosY=this._getContentPositionY();if(curPosY===this._contentHeight-this._dragMaxY){scrollStep=0}var bNoCancel=this._trigger("scrolling",null,{owner:this,smallIncrement:1,bigIncrement:0,horizontal:false,stepX:0,stepY:scrollStep});if(bNoCancel){this._bMouseDownV=true;this._bUseArrowDown=true;this._vBarArrowDown.switchClass(this.css.verticalScrollArrowDown,this.css.verticalScrollArrowDownActive);this._scrollTop(curPosY+scrollStep,false);var self=this;this._holdTimeoutID=setTimeout(function(){self._scrollTimeoutY(scrollStep,true)},250)}},_onMouseUpArrowDown:function(){this._bMouseDownV=false;this._bUseArrowDown=true;this._vBarArrowDown.switchClass(this.css.verticalScrollArrowDownActive,this.css.verticalScrollArrowDown);clearTimeout(this._holdTimeoutID)},_onMouseOverArrowDown:function(){if(this._bMouseDownV&&this._bUseArrowDown){this._scrollTimeoutY(40,true)}},_onMouseDownVDrag:function(event){this._bMouseDownV=true;this._dragLastY=event.pageY;this._bUseVDrag=true;this._bUseHDrag=false;this._trigger("thumbDragStart",null,{owner:this,horizontal:false})},_onMouseDownVTrack:function(event){if(event.target.id===this._vBarDrag[0].id){return true}this._bUseVTrack=true;var self=this,dragStartY=this._getTransform3dValueY(this._vBarDrag),curPosY=this._getContentPositionY(),scrollStep=this.options.bigIncrementStep===null?this._elemHeight:this.options.bigIncrementStep,bNoCancel;this._mTrackLastPosV=event.offsetY;if(event.offsetY>dragStartY+this._vDragHeight){this._lastBigIncDirV=1;bNoCancel=this._trigger("scrolling",null,{owner:this,smallIncrement:0,bigIncrement:1,horizontal:false,stepX:0,stepY:scrollStep});if(bNoCancel){this._scrollTop(curPosY+scrollStep,false);this._holdTimeoutID=setTimeout(function(){self._scrollTimeoutY(scrollStep,false)},250)}}else if(event.offsetY<dragStartY){this._lastBigIncDirV=-1;bNoCancel=this._trigger("scrolling",null,{owner:this,smallIncrement:0,bigIncrement:-1,horizontal:false,stepX:0,stepY:-scrollStep});if(bNoCancel){this._scrollTop(curPosY-scrollStep,false);this._holdTimeoutID=setTimeout(function(){self._scrollTimeoutY(-scrollStep,false)},250)}}},_onMouseMoveVTrack:function(event){if(this._bUseVTrack){this._mTrackLastPosV=event.offsetY}},_onMouseUpVTrack:function(){clearTimeout(this._holdTimeoutID);if(this._bUseVTrack){this._trigger("scrolled",null,{owner:this,smallIncrement:0,bigIncrement:this._lastBigIncDirV,horizontal:false})}this._bUseVTrack=false},_onMouseOutVTrack:function(){clearTimeout(this._holdTimeoutID);if(this._bUseVTrack){this._trigger("scrolled",null,{owner:this,smallIncrement:0,bigIncrement:this._lastBigIncDirV,horizontal:false})}this._bUseVTrack=false},_onMouseMoveVDrag:function(event){if(!this._bMouseDownV||!this._bUseVDrag){return true}if(this._bUseVDrag){var curPosY=this._getContentPositionY(),offset=event.pageY-this._dragLastY,nextPosY=curPosY+offset*(this._contentHeight/(this._elemHeight-3*17));var bNoCancel=this._trigger("thumbDragMove",null,{owner:this,horizontal:false,stepX:0,stepY:nextPosY-curPosY});if(bNoCancel){this._scrollToY(nextPosY,true);this._dragLastY=event.pageY}}},_onMouseUpVScrollbar:function(){var self=this;if(this._bUseArrowUp){this._bUseArrowUp=false;this._vBarArrowUp.switchClass(this.css.verticalScrollArrowUpActive,this.css.verticalScrollArrowUp);this._trigger("scrolled",null,{owner:this,smallIncrement:-1,bigIncrement:0,horizontal:false})}if(this._bUseArrowDown){this._bUseArrowDown=false;this._vBarArrowDown.switchClass(this.css.verticalScrollArrowDownActive,this.css.verticalScrollArrowDown);this._trigger("scrolled",null,{owner:this,smallIncrement:1,bigIncrement:0,horizontal:false})}if(this._bMouseDownV&&!this._mOverScrollbars&&!this._mOverContainer){this._hideScrollbarID=setTimeout(function(){self._hideScrollBars(false)},2e3)}else if(this._bMouseDownV&&!this._mOverScrollbars&&this._mOverContainer){this._toSimpleScrollbarID=setTimeout(function(){self._toSimpleScrollbar();self._toSimpleScrollbarID=0},2e3)}this._bMouseDownV=false;if(this._bUseVDrag){this._trigger("thumbDragEnd",null,{owner:this,horizontal:false});this._trigger("scrolled",null,{owner:this,smallIncrement:0,bigIncrement:0,horizontal:true})}this._bUseVDrag=false},_initCustomScrollBarH:function(){var css=this.css;this._hBarContainer=$("<div id='"+this.element.attr("id")+"_hBar'></div>").addClass(css.horizontalScrollContainer).css("width",this._elemWidth+"px");this._hBarArrowLeft=$("<div id='"+this.element.attr("id")+"_hBar_arrowLeft'></div>").addClass(css.horizontalScrollArrow).addClass(css.horizontalScrollArrowLeft);this._hBarTrack=$("<div id='"+this.element.attr("id")+"_hBar_track'></div>").addClass(css.horizontalScrollTrack).css("width",this._elemWidth-(2*this._customBarArrowsSize+this._customBarEmptySpaceSize)+"px");this._hBarArrowRight=$("<div id='"+this.element.attr("id")+"_hBar_arrowRight'></div>").addClass(css.horizontalScrollArrow).addClass(css.horizontalScrollArrowRight);this._hDragWidth=(this._elemWidth-(2*this._customBarArrowsSize+this._customBarEmptySpaceSize))*this._percentInViewH;this._hBarDrag=$("<span id='"+this.element.attr("id")+"_hBar_drag'></span>").addClass(css.horizontalScrollThumbDrag).css("width",this._hDragWidth+"px");if(this.options.scrollbarHParent){this._hBarContainer.append(this._hBarArrowLeft).append(this._hBarTrack.append(this._hBarDrag)).append(this._hBarArrowRight).appendTo(this.options.scrollbarHParent)}else{this._hBarContainer.append(this._hBarArrowLeft).append(this._hBarTrack.append(this._hBarDrag)).append(this._hBarArrowRight).appendTo(this._container[0].parentElement)}this._bindCustomScrollBarH()},_bindCustomScrollBarH:function(){this._holdTimeoutID=0;this._bMouseDownH=false;this._bUseArrowLeft=false;this._bUseArrowRight=false;this._bUseHDrag=false;this._dragLastX=0;this._bUseHTrack=false;this._lastBigIncDirH=0;this._mTrackLastPosH=0;if(this._hBarArrowLeft){this._hBarArrowLeft.on({mousedown:$.proxy(this._onMouseDownArrowLeft,this),mouseup:$.proxy(this._onMouseUpArrowLeft,this),mouseover:$.proxy(this._onMouseOverArrowLeft,this),mouseout:$.proxy(this._onMouseOutScrollbarArrow,this),touchstart:$.proxy(this._onTouchStartScrollbarElem,this)})}if(this._hBarArrowRight){this._hBarArrowRight.on({mousedown:$.proxy(this._onMouseDownArrowRight,this),mouseup:$.proxy(this._onMouseUpArrowRight,this),mouseover:$.proxy(this._onMouseOverArrowRight,this),mouseout:$.proxy(this._onMouseOutScrollbarArrow,this),touchstart:$.proxy(this._onTouchStartScrollbarElem,this)})}if(this._hBarDrag){this._hBarDrag.on({mousedown:$.proxy(this._onMouseDownHDrag,this),touchstart:$.proxy(this._onTouchStartScrollbarElem,this)})}if(this._hBarTrack){this._hBarTrack.on({mousedown:$.proxy(this._onMouseDownHTrack,this),mousemove:$.proxy(this._onMouseMoveHTrack,this),mouseup:$.proxy(this._onMouseUpHTrack,this),mouseout:$.proxy(this._onMouseOutHTrack,this),touchstart:$.proxy(this._onTouchStartScrollbarElem,this)})}if(this._hBarContainer){this._hBarContainer.on({wheel:$.proxy(this._onWheelContainer,this),mouseenter:$.proxy(this._onMouseEnterScrollbarElem,this),mouseleave:$.proxy(this._onMouseLeaveScrollbarElem,this)})}$("body").on("mousemove",$.proxy(this._onMouseMoveHDrag,this));$(window).on("mouseup",$.proxy(this._onMouseUpHScrollbar,this))},_scrollTimeoutX:function(step,bSmallIncement){var curPosX=this._getContentPositionX();if(curPosX===0&&step<=0||curPosX===this._contentWidth-this._dragMaxX&&step>=0){return}var self=this,bNoCancel,eventArgs={owner:self,smallIncrement:0,bigIncrement:0,horizontal:true,stepX:step,stepY:0};if(bSmallIncement){eventArgs.smallIncrement=Math.sign(step)}else{var dragStartX=this._getTransform3dValueX(this._hBarDrag);if(this._mTrackLastPosH>dragStartX&&this._mTrackLastPosH<dragStartX+this._hDragWidth){return}eventArgs.bigIncrement=Math.sign(step);this._lastBigIncDirH=Math.sign(step)}bNoCancel=this._trigger("scrolling",null,eventArgs);if(bNoCancel){var curPosY=this._getContentPositionX();this._scrollLeft(curPosY+step,false);this._holdTimeoutID=setTimeout(function(){self._scrollTimeoutX(step,bSmallIncement)},50)}},_onMouseDownArrowLeft:function(){var scrollStep=-this.options.smallIncrementStep,curPosX=this._getContentPositionX();if(curPosX===0){scrollStep=0}var bNoCancel=this._trigger("scrolling",null,{owner:this,smallIncrement:-1,bigIncrement:0,horizontal:true,stepX:scrollStep,stepY:0});if(bNoCancel){this._bMouseDownH=true;this._bUseArrowLeft=true;this._hBarArrowLeft.switchClass(this.css.horizontalScrollArrowLeft,this.css.horizontalScrollArrowLeftActive);this._scrollLeft(curPosX+scrollStep,false);var self=this;this._holdTimeoutID=setTimeout(function(){self._scrollTimeoutX(scrollStep,true)},250)}},_onMouseUpArrowLeft:function(){this._bMouseDownH=false;this._bUseArrowLeft=false;this._hBarArrowLeft.switchClass(this.css.horizontalScrollArrowLeftActive,this.css.horizontalScrollArrowLeft);clearTimeout(this._holdTimeoutID);this._trigger("scrolled",null,{owner:this,smallIncrement:-1,bigIncrement:0,horizontal:true})},_onMouseOverArrowLeft:function(){if(this._bMouseDownH&&this._bUseArrowLeft){this._scrollTimeoutX(-40,true)}},_onMouseDownArrowRight:function(){var scrollStep=this.options.smallIncrementStep,curPosX=this._getContentPositionX();if(curPosX===this._contentWidth-this._dragMaxX){scrollStep=0}var bNoCancel=this._trigger("scrolling",null,{owner:this,smallIncrement:1,bigIncrement:0,horizontal:true,stepX:scrollStep,stepY:0});if(bNoCancel){this._bMouseDownH=true;this._bUseArrowRight=true;this._hBarArrowRight.switchClass(this.css.horizontalScrollArrowRight,this.css.horizontalScrollArrowRightActive);this._scrollLeft(curPosX+scrollStep,false);var self=this;this._holdTimeoutID=setTimeout(function(){self._scrollTimeoutX(scrollStep,true)},250)}},_onMouseUpArrowRight:function(){this._bMouseDownH=false;this._bUseArrowRight=false;this._hBarArrowRight.switchClass(this.css.horizontalScrollArrowRightActive,this.css.horizontalScrollArrowRight);clearTimeout(this._holdTimeoutID);this._trigger("scrolled",null,{owner:this,smallIncrement:1,bigIncrement:0,horizontal:true})},_onMouseOverArrowRight:function(){if(this._bMouseDownH&&this._bUseArrowRight){this._scrollTimeoutX(40,true)}},_onMouseDownHDrag:function(event){this._bMouseDownH=true;this._dragLastX=event.pageX;this._bUseVDrag=false;this._bUseHDrag=true;this._trigger("thumbDragStart",null,{owner:this,horizontal:true})},_onMouseDownHTrack:function(event){if(event.target.id===this._hBarDrag[0].id){return true}this._bUseHTrack=true;var self=this,dragStartX=this._getTransform3dValueX(this._hBarDrag),curPosX=this._getContentPositionX(),scrollStep=this.options.bigIncrementStep===null?this._elemWidth:this.options.bigIncrementStep,bNoCancel;this._mTrackLastPosH=event.offsetX;if(event.offsetX>dragStartX+this._hDragWidth){this._lastBigIncDirH=1;bNoCancel=this._trigger("scrolling",null,{owner:this,smallIncrement:0,bigIncrement:1,horizontal:true,stepX:scrollStep,stepY:0});if(bNoCancel){this._scrollLeft(curPosX+scrollStep,false);this._holdTimeoutID=setTimeout(function(){self._scrollTimeoutX(scrollStep,false)},250)}}else if(event.offsetX<dragStartX){this._lastBigIncDirH=-1;bNoCancel=this._trigger("scrolling",null,{owner:this,smallIncrement:0,bigIncrement:-1,horizontal:true,stepX:-scrollStep,stepY:0});if(bNoCancel){this._scrollLeft(curPosX-scrollStep,false);this._holdTimeoutID=setTimeout(function(){self._scrollTimeoutX(-scrollStep,false)},250)}}},_onMouseMoveHTrack:function(event){if(this._bUseVTrack){this._mTrackLastPosH=event.offsetX}},_onMouseUpHTrack:function(){clearTimeout(this._holdTimeoutID);if(this._bUseHTrack){this._trigger("scrolled",null,{owner:this,smallIncrement:0,bigIncrement:this._lastBigIncDirH,horizontal:true})}this._bUseHTrack=false},_onMouseOutHTrack:function(){clearTimeout(this._holdTimeoutID);if(this._bUseHTrack){this._trigger("scrolled",null,{owner:this,smallIncrement:0,bigIncrement:this._lastBigIncDirH,horizontal:true})}this._bUseHTrack=false},_onMouseMoveHDrag:function(evt){if(!this._bMouseDownH||!this._bUseHDrag){return true}if(this._bUseHDrag){var curPosX=this._getContentPositionX(),offset=evt.pageX-this._dragLastX,nextPostX=curPosX+offset*(this._contentWidth/this._elemWidth);var bNoCancel=this._trigger("thumbDragMove",null,{owner:this,horizontal:true,stepX:nextPostX-curPosX,stepY:0});if(bNoCancel){this._scrollToX(nextPostX,true);this._dragLastX=evt.pageX}}},_onMouseUpHScrollbar:function(){var self=this;if(this._bUseArrowLeft){this._bUseArrowLeft=false;this._hBarArrowLeft.switchClass(this.css.horizontalScrollArrowLeftActive,this.css.horizontalScrollArrowLeft);this._trigger("scrolled",null,{owner:this,smallIncrement:-1,bigIncrement:0,horizontal:true})}if(this._bUseArrowRight){this._bUseArrowRight=false;this._hBarArrowRight.switchClass(this.css.horizontalScrollArrowRightActive,this.css.horizontalScrollArrowRight);this._trigger("scrolled",null,{owner:this,smallIncrement:1,bigIncrement:0,horizontal:true})}if(this._bMouseDownH&&!this._mOverScrollbars&&!this._mOverContainer){this._hideScrollbarID=setTimeout(function(){self._hideScrollBars(false)},2e3)}else if(this._bMouseDownH&&!this._mOverScrollbars&&this._mOverContainer){this._toSimpleScrollbarID=setTimeout(function(){self._toSimpleScrollbar();self._toSimpleScrollbarID=0},2e3)}this._bMouseDownH=false;if(this._bUseHDrag){this._trigger("thumbDragEnd",null,{owner:this,horizontal:true});this._trigger("scrolled",null,{owner:this,smallIncrement:0,bigIncrement:0,horizontal:true})}this._bUseHDrag=false},_showScrollBars:function(animate,bDragOnly,hideAfterShown,opacityStep){if(this.options.scrollbarType!=="custom"){return}var self=this,targetOpacty=.9,currentOpacity=0;function showStep(){if(currentOpacity>targetOpacty){if(hideAfterShown){self._hideScrollBars(true,opacityStep)}self._touchBarsShown=true;cancelAnimationFrame(self._showScrollbarsAnimId);self._showScrollbarsAnimId=0;return}if(bDragOnly){self._setSimpleScrollBarOpacity(currentOpacity)}else{self._setScrollBarsOpacity(currentOpacity)}currentOpacity+=opacityStep?opacityStep:.05;self._showScrollbarsAnimId=requestAnimationFrame(showStep)}if(!animate){if(bDragOnly){self._setSimpleScrollBarOpacity(targetOpacty)}else{self._setScrollBarsOpacity(targetOpacty)}self._touchBarsShown=true}else{this._showScrollbarsAnimId=requestAnimationFrame(showStep)}},_updateScrollBarsPos:function(destX,destY){if(this.options.scrollbarType!=="custom"){return}var self=this,animationID,calculatedDest;function updateCSS(){if(self._hBarDrag){calculatedDest=destX*(self._elemWidth-2*self._customBarArrowsSize-self._customBarEmptySpaceSize)/self._contentWidth;self._hBarDrag.css("-webkit-transform","translate3d("+calculatedDest+"px, 0px, 0px)").css("-moz-transform","translate3d("+calculatedDest+"px, 0px, 0px)").css("-ms-transform","translate3d("+calculatedDest+"px, 0px, 0px)")}if(self._vBarDrag){calculatedDest=destY*(self._elemHeight-2*self._customBarArrowsSize-self._customBarEmptySpaceSize)/self._contentHeight;self._vBarDrag.css("-webkit-transform","translate3d(0px, "+calculatedDest+"px, 0px)").css("-moz-transform","translate3d(0px, "+calculatedDest+"px, 0px)").css("-ms-transform","translate3d(0px, "+calculatedDest+"px, 0px)")}}animationID=requestAnimationFrame(updateCSS)},_hideScrollBars:function(animate,bDragOnly,opacityStep){if(this.options.scrollbarType!=="custom"||this.options.alwaysVisible||!this._vBarDrag&&!this._hBarDrag){return}var self=this,targetOpacty=0,currentOpacity=this._vBarDrag?this._vBarDrag.css("opacity"):this._hBarDrag.css("opacity"),animationId;if(currentOpacity===0){return}function fadeStep(){if(currentOpacity<targetOpacty){self._setScrollBarsOpacity(currentOpacity);self._touchBarsShown=false;cancelAnimationFrame(animationId);return}if(bDragOnly){self._setSimpleScrollBarOpacity(currentOpacity)}else{self._setScrollBarsOpacity(currentOpacity)}currentOpacity-=opacityStep?opacityStep:.05;animationId=requestAnimationFrame(fadeStep)}if(!animate){if(bDragOnly){self._setSimpleScrollBarOpacity(targetOpacty)}else{self._setScrollBarsOpacity(targetOpacty)}self._touchBarsShown=false}else{animationId=requestAnimationFrame(fadeStep)}},_setSimpleScrollBarOpacity:function(newOpacity){if(this._vBarDrag&&this._percentInViewV<1){this._vBarDrag.css("opacity",newOpacity).css("width",5+"px")}if(this._hBarDrag&&this._percentInViewH<1){this._hBarDrag.css("height",5+"px").css("top",5+"px").css("opacity",newOpacity)}},_setScrollBarsOpacity:function(newOpacity){if(this._vBarDrag&&this._percentInViewV<1){this._vBarDrag.css("width",9+"px").css("opacity",newOpacity);this._vBarArrowUp.css("opacity",newOpacity);this._vBarArrowDown.css("opacity",newOpacity)}if(this._hBarDrag&&this._percentInViewH<1){this._hBarDrag.css("height",9+"px").css("top",3+"px").css("opacity",newOpacity);this._hBarArrowLeft.css("opacity",newOpacity);this._hBarArrowRight.css("opacity",newOpacity)}},_toSimpleScrollbar:function(){if(this._vBarDrag&&this._percentInViewV<1){this._vBarDrag.css("width",5+"px");this._vBarArrowUp.css("opacity",0);this._vBarArrowDown.css("opacity",0)}if(this._hBarDrag&&this._percentInViewH<1){this._hBarDrag.css("height",5+"px").css("top",5+"px");this._hBarArrowLeft.css("opacity",0);this._hBarArrowRight.css("opacity",0)}},_onMouseEnterScrollbarElem:function(){this._mOverScrollbars=true;clearTimeout(this._hideScrollbarID);clearTimeout(this._toSimpleScrollbarID);this._toSimpleScrollbarID=0;this._showScrollBars(false)},_onMouseLeaveScrollbarElem:function(){var self=this;this._mOverScrollbars=false;if(!this._bMouseDownV&&!this._bMouseDownH){this._hideScrollbarID=setTimeout(function(){self._hideScrollBars(false)},2e3);this._toSimpleScrollbarID=setTimeout(function(){self._toSimpleScrollbar();self._toSimpleScrollbarID=0},2e3)}},_onTouchStartScrollbarElem:function(){return false},destroy:function(){cancelAnimationFrame(this._touchInertiaAnimID);cancelAnimationFrame(this._showScrollbarsAnimId);clearTimeout(this._hideScrollbarID);clearTimeout(this._toSimpleScrollbarID);clearTimeout(this._holdTimeoutID);if(this._evts){this.element.off(this._evts);delete this._evts;if(this._hBarDrag){this._hBarDrag.remove()}if(this._hBarContainer){this._hBarContainer.remove()}if(this._vBarDrag){this._vBarDrag.remove()}if(this._vBarContainer){this._vBarContainer.remove()}$.Widget.prototype.destroy.apply(this,arguments)}return this}});$.extend($.ui.igScroll,{version:"<build_number>"});$(document).on("igcontrolcreated",function(event,args){var container=args.owner.scrollContainer();if(container.length===0&&args.owner.container){container=args.owner.container().find("[data-scroll]").eq(0)}container.igScroll({modifyDOM:false})})})(jQuery);